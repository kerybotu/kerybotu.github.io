import os
import re

for filename in os.listdir('.'):
    if filename.endswith('.html'):
        title = filename.replace('.html', '').capitalize() + " - 奇怪的小马维基"
        description = f"探索奇怪的小马维基的 {filename.replace('.html', '')} 页面内容"
        
        with open(filename, 'r', encoding='utf-8') as f:
            original_content = f.read()
        
        if not original_content.startswith('---'):
            # 清理 <html>、<head>、<body> 等标签
            cleaned_content = re.sub(r'<!DOCTYPE html>[\s\S]*?<body>', '', original_content, flags=re.IGNORECASE)
            cleaned_content = re.sub(r'</body>[\s\S]*?</html>', '', cleaned_content, flags=re.IGNORECASE)
            
            front_matter = f"""---
layout: default
title: "{title}"
description: "{description}"
---
"""
            new_content = front_matter + cleaned_content.strip()
            with open(filename, 'w', encoding='utf-8') as f:
                f.write(new_content)
            print(f"已处理: {filename}")
        else:
            print(f"跳过: {filename}")